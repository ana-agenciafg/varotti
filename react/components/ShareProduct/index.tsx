import React, { useEffect, useState } from 'react';
//@ts-ignore
import './style.css';

const ShareProduct = () => {
  const [urlProd, setUrlProd] = useState<string | null>(null);
  const [title, setTitle] = useState<string | null>(null);

  useEffect(() => {
    if (typeof window !== 'undefined' && typeof document !== 'undefined') {
      setUrlProd(encodeURIComponent(window.location.href));
      setTitle(encodeURIComponent(document.title));
    }
  }, []);

  const linkEmail = urlProd && title ? `mailto:?subject=Check out this product!&body=${title} - ${urlProd}` : '#';
  const linkWhatsApp = urlProd && title ? `https://wa.me/?text=${title} - ${urlProd}` : '#';
  const linkFacebook = urlProd ? `https://www.facebook.com/sharer/sharer.php?u=${urlProd}` : '#';
  const linkPinterest = urlProd && title ? `https://pinterest.com/pin/create/button/?url=${urlProd}&description=${title}` : '#';

  const handleCopyLink = () => {
    if (urlProd) {
      navigator.clipboard.writeText(decodeURIComponent(urlProd));
    }
  };

  if (!urlProd || !title) {
    return <p>Carregando...</p>; // Exiba um estado de carregamento se necess√°rio.
  }

  return (
    <>
      <h4 className="share-title">Compartilhe!</h4>
      <div className="share-buttons">
        <a
          href={linkWhatsApp}
          title="Compartilhe no WhatsApp"
          className="share-button whatsapp-button"
          target="_blank"
          rel="noopener noreferrer"
        >
          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0012 3.17074e-08C9.09072 -0.000145002 7.21316 0.497266 5.55336 1.44326C3.89355 2.38925 2.50873 3.75121 1.53524 5.39504C0.561756 7.03887 0.0331637 8.90789 0.00151033 10.8181C-0.0301431 12.7283 0.436234 14.6138 1.35472 16.289L0.455657 19.4621C0.371786 19.7513 0.367071 20.0577 0.442006 20.3492C0.51694 20.6408 0.668777 20.907 0.881663 21.1199C1.09455 21.3327 1.36068 21.4846 1.65227 21.5595C1.94387 21.6345 2.25023 21.6297 2.53938 21.5459L5.71255 20.6468C7.18309 21.4528 8.81844 21.9119 10.4936 21.989C12.1688 22.0662 13.8394 21.7593 15.3778 21.0919C16.9162 20.4245 18.2816 19.4142 19.3697 18.1382C20.4579 16.8623 21.2399 15.3544 21.656 13.7299C22.0721 12.1054 22.1113 10.4073 21.7706 8.76537C21.4299 7.12342 20.7183 5.58109 19.6902 4.25627C18.6621 2.93146 17.3447 1.85923 15.8388 1.12154C14.3328 0.383854 12.6781 0.000232285 11.0012 3.17074e-08ZM13.5503 17.7698H13.5397C11.0701 17.767 8.70262 16.784 6.95734 15.0367C5.21206 13.2894 4.23174 10.9208 4.23174 8.45123C4.23454 7.44317 4.63695 6.47735 5.35075 5.76553C6.06455 5.05371 7.03148 4.65399 8.03955 4.65399C8.31665 4.6546 8.58869 4.72825 8.82824 4.86753C9.0678 5.0068 9.2664 5.20678 9.40401 5.44729L10.6416 7.61562C10.791 7.87531 10.8679 8.17039 10.8642 8.46999C10.8605 8.76958 10.7763 9.06267 10.6204 9.31856L9.86941 10.5773C10.247 11.2193 10.7822 11.7545 11.4243 12.1321L12.683 11.3811C12.9389 11.2253 13.2319 11.1411 13.5315 11.1374C13.8311 11.1336 14.1262 11.2105 14.3859 11.36L16.5542 12.5975C16.7947 12.7351 16.9947 12.9337 17.134 13.1733C17.2733 13.4128 17.3469 13.6849 17.3475 13.962C17.3475 14.97 16.9478 15.937 16.236 16.6508C15.5242 17.3646 14.5584 17.767 13.5503 17.7698Z" fill="#333333"/><path d="M11.9019 13.8246C11.7842 13.8934 11.6518 13.9331 11.5157 13.9405C11.3796 13.9478 11.2436 13.9226 11.1192 13.8669C9.78915 13.2774 8.72594 12.2141 8.13643 10.8841C8.0807 10.7597 8.05547 10.6237 8.06283 10.4876C8.07018 10.3515 8.10992 10.219 8.17874 10.1014L9.173 8.45131L7.97778 6.34644C7.42875 6.36023 6.90685 6.58807 6.52348 6.98133C6.1401 7.37458 5.92562 7.90211 5.92579 8.45131C5.9244 9.4523 6.12036 10.4437 6.50245 11.3689C6.88455 12.2941 7.4453 13.1349 8.15261 13.8432C8.85992 14.5515 9.69993 15.1134 10.6246 15.4968C11.5493 15.8802 12.5404 16.0775 13.5414 16.0775H13.552C14.1012 16.0777 14.6287 15.8632 15.022 15.4798C15.4152 15.0964 15.6431 14.5746 15.6569 14.0255L13.552 12.8303L11.9019 13.8246Z" fill="#333333"/></svg> 
        </a>
        <a
          href={linkEmail}
          title="Compartilhe no e-mail"
          className="share-button email-button"
        >
          <svg width="23" height="19" viewBox="0 0 23 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.3 19C1.6675 19 1.12623 18.7676 0.6762 18.3029C0.2254 17.8374 0 17.2781 0 16.625V2.375C0 1.72187 0.2254 1.16296 0.6762 0.69825C1.12623 0.23275 1.6675 0 2.3 0H20.7C21.3325 0 21.8741 0.23275 22.3249 0.69825C22.775 1.16296 23 1.72187 23 2.375V16.625C23 17.2781 22.775 17.8374 22.3249 18.3029C21.8741 18.7676 21.3325 19 20.7 19H2.3ZM11.5 10.4797C11.5958 10.4797 11.6963 10.4646 11.8013 10.4346C11.9071 10.4053 12.0079 10.3609 12.1037 10.3016L20.24 5.04688C20.3933 4.94792 20.5083 4.82442 20.585 4.67638C20.6617 4.52754 20.7 4.36406 20.7 4.18594C20.7 3.7901 20.5371 3.49323 20.2113 3.29531C19.8854 3.0974 19.55 3.10729 19.205 3.325L11.5 8.3125L3.795 3.325C3.45 3.10729 3.11458 3.10215 2.78875 3.30956C2.46292 3.51777 2.3 3.8099 2.3 4.18594C2.3 4.38385 2.33833 4.55683 2.415 4.70487C2.49167 4.85371 2.60667 4.96771 2.76 5.04688L10.8962 10.3016C10.9921 10.3609 11.0929 10.4053 11.1987 10.4346C11.3037 10.4646 11.4042 10.4797 11.5 10.4797Z" fill="#333333"/></svg>
        </a>
        <a
          href={linkFacebook}
          title="Compartilhe no Facebook"
          className="share-button facebook-button"
          target="_blank"
          rel="noopener noreferrer"
        > 
          <svg width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 0C5.14855 0 0 4.95468 0 11.067C0 16.5905 4.20555 21.1689 9.7037 22V14.2653H6.7827V11.067H9.7037V8.62891C9.7037 5.85553 11.4195 4.32386 14.0472 4.32386C15.3054 4.32386 16.6209 4.53967 16.6209 4.53967V7.26214H15.1719C13.7425 7.26214 13.2974 8.1154 13.2974 8.99079V11.067H16.4864L15.9769 14.2653H13.2974V22C18.7944 21.17 23 16.5894 23 11.067C23 4.95468 17.8514 0 11.5 0Z" fill="#333333"/></svg>
        </a>
        <a
          href={linkPinterest}
          title="Compartilhe no Pinterest"
          className="share-button pinterest-button"
          target="_blank"
          rel="noopener noreferrer"
        >  
          <svg width="17" height="21" viewBox="0 0 17 21" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0.823608 7.81768C0.823608 7.01492 0.997495 6.21788 1.34724 5.42849C1.69699 4.63911 2.19692 3.90515 2.84899 3.23044C3.50107 2.55573 4.35667 2.00718 5.41777 1.58668C6.47888 1.16618 7.65459 0.955933 8.9449 0.955933C11.0394 0.955933 12.7586 1.58094 14.1022 2.82906C15.4459 4.07717 16.1177 5.54891 16.1177 7.24428C16.1177 9.42322 15.5486 11.2237 14.4085 12.6438C13.2684 14.064 11.7962 14.775 9.99218 14.775C9.39938 14.775 8.84215 14.6412 8.32247 14.3736C7.80278 14.106 7.43723 13.7811 7.2258 13.3988L6.4354 16.4188C6.3702 16.6615 6.28325 16.9062 6.17853 17.1546C6.0738 17.4031 5.95722 17.642 5.83273 17.8714C5.70824 18.1008 5.58178 18.3167 5.45729 18.5213C5.3328 18.7258 5.20634 18.9169 5.08185 19.0947C4.95737 19.2724 4.84869 19.4234 4.75582 19.5438C4.66295 19.6642 4.57798 19.7694 4.49894 19.8592L4.38038 20.0121C4.34086 20.0637 4.28751 20.0828 4.2223 20.0694C4.15709 20.0561 4.11757 20.0178 4.10374 19.9548C4.10374 19.9414 4.09386 19.8535 4.0741 19.6872C4.05434 19.5209 4.03458 19.347 4.01482 19.1616C3.99506 18.9762 3.9753 18.7372 3.95554 18.4448C3.93578 18.1524 3.92986 17.8676 3.93578 17.5942C3.94171 17.3209 3.96147 17.017 3.99506 16.6864C4.02866 16.3557 4.07805 16.0499 4.14326 15.7689C4.28751 15.1707 4.77558 13.1752 5.60549 9.78638C5.50076 9.58186 5.41382 9.33721 5.34861 9.05051C5.2834 8.7638 5.24981 8.53062 5.24981 8.35286L5.23005 8.06616C5.23005 7.25001 5.44346 6.57148 5.87225 6.03057C6.30104 5.48966 6.81677 5.21825 7.4234 5.21825C7.91146 5.21825 8.28888 5.37498 8.55959 5.68653C8.8303 5.99808 8.96466 6.3899 8.96466 6.86201C8.96466 7.15445 8.90934 7.51569 8.79671 7.94192C8.68407 8.36815 8.53588 8.85937 8.35211 9.41366C8.16834 9.96795 8.03595 10.4171 7.95691 10.7612C7.82452 11.3346 7.9411 11.8315 8.30271 12.252C8.66431 12.6725 9.14843 12.8828 9.75506 12.8828C10.7964 12.8828 11.656 12.3132 12.3337 11.1721C13.0115 10.031 13.3513 8.65295 13.3513 7.03403C13.3513 5.79739 12.9364 4.78819 12.1065 4.00454C11.2766 3.22088 10.1167 2.82906 8.62875 2.82906C6.96892 2.82906 5.6213 3.34512 4.58786 4.37725C3.55442 5.40938 3.03671 6.64603 3.03671 8.08527C3.03671 8.93965 3.28766 9.65832 3.78758 10.2451C3.9595 10.4362 4.01087 10.6408 3.94566 10.8567C3.91998 10.9198 3.88046 11.067 3.8271 11.2963C3.77375 11.5257 3.73423 11.6729 3.70855 11.736C3.68286 11.8755 3.61567 11.9691 3.51095 12.0131C3.40622 12.0571 3.28766 12.0552 3.15527 12.0035C2.37871 11.6977 1.79579 11.1721 1.40652 10.4267C1.01725 9.68125 0.823608 8.81159 0.823608 7.81768Z" fill="#333333"/>
          </svg>
        </a>
        <button onClick={handleCopyLink} className="share-button copy-link-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M17.033 6.966c.584.583.584 1.529 0 2.112l-7.955 7.956c-.583.583-1.529.583-2.112 0-.583-.583-.583-1.529 0-2.112l7.956-7.956c.582-.583 1.528-.583 2.111 0zm-9.138 13.386c-1.171 1.171-3.076 1.171-4.248 0-1.171-1.171-1.171-3.077 0-4.248l5.639-5.632c-1.892-.459-3.971.05-5.449 1.528l-2.147 2.147c-2.254 2.254-2.254 5.909 0 8.163 2.254 2.254 5.909 2.254 8.163 0l2.147-2.148c1.477-1.477 1.986-3.556 1.527-5.448l-5.632 5.638zm6.251-18.662l-2.146 2.148c-1.478 1.478-1.99 3.553-1.53 5.445l5.634-5.635c1.172-1.171 3.077-1.171 4.248 0 1.172 1.171 1.172 3.077 0 4.248l-5.635 5.635c1.893.459 3.968-.053 5.445-1.53l2.146-2.147c2.254-2.254 2.254-5.908 0-8.163-2.253-2.254-5.908-2.254-8.162-.001z" fill="#333333"/></svg>
        </button>
      </div>
    </>
  );
};

export default ShareProduct;
